[TOC]



# Python的基础学习



保存文件是ctrl＋s

打开内置控制台是ctrl＋`

打印的文字用print()函数，打印的文字（字符串）用单引号或者双引号括起来（但不能混用单引号和双引号）

#### 1.命令模式和Python交互模式

在命令模式下，可以执行`python`进入Python交互模式，也可以执行`python hello.py`运行一个`.py`文件。

执行一个`.py`文件只能在命令模式执行。

在命令模式运行`.py`文件和在Python交互环境下直接运行Python代码有所不同。Python交互环境会把每一行Python代码的结果自动打印出来，但是直接运行Python代码却不行。

Python交互模式的代码是输一行，执行一行，而命令模式下直接运行`.py`文件是一次性执行该文件内的所有代码。可见，Python交互模式主要是为了调试Python代码用的。

###### 在Python交互环境下

```python
>>>100+200
300//输出的结果
```

###### 在命令模式下

（输出却啥也没有）想要输出结果，必须用`print()`打印出来

```python
print(100+200)
300//输出的结果
```

例：在Python交互模式下输入`2**10`(相当于2的10次方)，会得到：1024

`SyntaxError`表示输入的Python代码有语法错误

对于无法识别的中文字符`“`，解释器会明确指出错误原因是`invalid  character '“'`

`小结 `

在 Python交互式模式下，可以直接输入代码，然后执行，并立即得到结果。

在命令模式下，可以直接运行`.py`文件。

用文本编辑器写Python程序，然后保存为后缀为`.py`的文件，就可以用Python直接运行这个程序了。

直接输入`python`进入交互模式，相当于启动了Python解释器，但是等待你一行一行地输入源代码，每输入一行就执行一行。

直接运行`.py`文件相当于启动了Python解释器，然后一次性把`.py`文件的源代码给执行了，你是没有机会以交互的方式输入源代码的。

用Python开发程序，完全可以一边在文本编辑器里写代码，一边开一个交互式命令窗口，在写代码的过程中，把部分代码粘到命令行去验证，事半功倍！前提是得有个27'的超大显示器！

###### 输出

`print()`函数接受多个字符串，用逗号","隔开，可以连成一串输出，`print()`函数依次打印每个字符串，遇到逗号会输出一个空格。

```python
print('The quick brown fox','jump over','the lazy dog')
```

`print()`可以打印整数或者计算结果

```python
print(300)
300//输出
print(100+200)
300//输出
print('100+200=',100+200)
100+200= 300//输出
```

###### 输入

`input()`函数可用于输入字符串，并存在到一个变量里。

例（输入用户的名字）

```python
name=input()
Krystal//键盘输入
```

当输入`name=input()`后运行，这时输入Krystal,然后按回车后完成输入。

刚才输入的Krystal存放在了`name`变量里了。

```python
print(name)
Krystal//输出
```

```
name=input('please enter your name: ')
print('hello',name)
```

```
输入是Input，输出是Output，因此，我们把输入输出统称为Input/Output，或者简写为IO。

input()和print()是在命令行下面最基本的输入和输出，但是，用户也可以通过其他更高级的图形界面完成输入和输出，比如，在网页上的一个文本框输入自己的名字，点击“确定”后在网页上看到输出信息。
```

#### 2.python的基础

`#`开头的语句是注释，当语句以冒号`:`结尾时，缩进的语句视为代码块。

缩进有利有弊。好处是强迫你写出格式化的代码，但没有规定缩进是几个空格还是Tab。按照约定俗成的惯例，应该始终坚持使用4个空格的缩进。

`小结`

Python使用缩进来组织代码块，请务必遵守约定俗成的习惯，坚持使用4个空格的缩进。

在文本编辑器中，需要设置把Tab自动转换为4个空格，确保不混用Tab和空格。

###### 数据类型和变量

数据类型

###### 整数

python可以处理任意大小的整数，当然包括负整数，

对于很大的数，很难数清楚0的个数。

Python允许在数字中间以`_`分隔，因此`100000000`和`100_000_000`是完全相等的

###### 浮点数

浮点数可以用科学记数法，把10用e替代，1.23x109就是`1.23e9`，或者`12.3e8`，0.000012可以写成`1.2e-5`，等等。

整数和浮点数在计算机内部存储的方式是不同的，整数运算永远是精确的（除法难道也是精确的？是的！），而浮点数运算则可能会有四舍五入的误差。

###### 字符串

字符串是以单引号`'`或双引号`"`括起来的任意文本，比如`'abc'`,`"xyz"`等等。请注意，`''`或`""`本身只是一种表示方式，不是字符串`'abc'`,只有`a`,`b` ,`c`这3个字符。如果`'`本身也是一个字符，那就可以用`""`括起来，比如`"I'm OK"`包含的字符是`I`，`'`，`m`，空格，`O`，`K`这6个字符。

如果字符串内部既包含`'`又包含`"`怎么办？可以用转义字符`\`来标识，比如：

```python
'I\'m\"OK\"!'
```

如果`'`本身也是一个字符，那就可以用`""`括起来，比如`"I'm OK"`包含的字符是`I`，`'`，`m`，空格，`O`，`K`这6个字符。

如果字符串内部既包含`'`又包含`"`怎么办？可以用转义字符`\`来标识，比如：

```python
print('I\'m ok.')
I'm ok.//输出
print('I\'m learning\nPython.')
I'm learning
Python.
print('\\\n\\')
\
\
```

如果字符串里面有很多字符都需要转义，就需要加很多`\`,为了简化，Python还允许用`r''`表示`''`内部的字符串默认不转义。

```python
print('\\\t\\')
\	\//输出
print(r'\\\t\\')
\\\t\\
```

如果字符串内部有很多换行，用`\n`写在一行里不好阅读，简化，Python允许`'''...'''	`的格式表示多行内容，多行字符字符串也可以用`r'''...'''`的格式表示。

```python
print('''line1
... line2
... line3''')
输出
line1
line2
line3
```

```python
print(r'''hello,\n
world''')
输出
hello,\n
world
```

###### 布尔值

布尔值和布尔代数的表示完全一致，一个布尔值只有`True`、`False`俩种值，要么是`True`,要么是`False`,在Python中，可以直接用`True`、`False`表示布尔值（注意大小写），也可以通过布尔运算计算出来:

布尔值可以用`and`、`or`和`not`运算

`and`运算是与运算，只有所有都为`True`，`and`运算结果才是`True`：

```python
print(True or True)
True//输出
print(True or False)
True//输出
print(False or False)
False//输出
```

`not`运算是非运算，它是一个单目运算符，把`True`变成`False`，`False`变成`True`：

```python
print(not True)
False//输出
print(not 1>2)
True
```

布尔值经常用在条件判断中，

```python
if grade>=60:
    print('及格')
else:
    print('不及格')
```

###### 空值

空值是Python里一个特殊的值，用`None`表示。`None`不能理解为0，因为0是有意义的，而`None`是一个特殊的空值。

此外，Python还有列表、字典等多种数据类型，还允许创建自定义数据类型。

###### 变量

在计算机程序中，变量不仅可以是数字，还可以是任意数据类型。

变量名必须是大小写英文、数字和`_`的组合，且不能用数字开头。

```
Ro_123 ='ro_123'
```

变量`Ro_123`是一个字符串。

```python
Answer = False
```

变量`Answer`是一个布尔值`False`。

在Python中，等号`=`是 赋值语句，可以把任意数据类型赋值给变量，同一个变量可以反复赋值，而且可以是不同类型的变量，例如

```python
a = 123 # a是整数
print(a)
a = 'ABC' # a变为字符串
print(a)
输出
123
ABC
```

这种变量本身类型不固定的语言称之为动态语言，与之对应的是静态语言。静态语言在定义变量时必须指定变量类型，如果赋值的时候类型不匹配，就会报错。

```
例如Java是静态语言，赋值语言为：
int a = 123; // a是整数类型变量
a = "ABC"; // 错误：不能把字符串赋给整型变量
```

和静态语言相比，动态语言更灵活。

理解变量在计算机内存中的表示也非常重要。当我们写：

```
a = 'Ro123'
```

时，Python解释器干了两件事情：

1. 在内存中创建了一个`'Ro123'`的字符串；
2. 在内存中创建了一个名为`a`的变量，并把它指向`'Ro123'`。

也可以把一个变量`a`赋值给另一个变量`b`，这个操作实际上是把变量`b`指向变量`a`所指向的数据，例如下面的代码：

```python
a = 'Ro123'
b=a
a='fg562'
print(b)
输出
Ro123
```

最后一行打印出变量`b`的内容为`'Ro123'`

执行`a='Ro123'`,解释器创建了字符串`'Ro123'`和变量`a`,并把`a`指向`Ro123`.

执行`b=a`,解释器创建了变量`b`,并把`b`指向`a`指向的字符串`'Ro123'`

执行`a = 'fg562'`，解释器创建了字符串'fg562'，并把`a`的指向改为`'fg562'`，但`b`并没有更改.

所以，最后打印变量`b`的结果自然是`'Ro123'`了。

###### 常量

所谓常量就是不能变的变量，比如常用的数学常数π就是一个常量。在Python中，通常用全部大写的变量名表示常量：

```python
PI = 3.14159265359
```

但事实上`PI`仍然是一个变量，Python根本没有任何机制保证`PI`不会被改变，所以用全部大写的变量名表示常量只是一个习惯上的用法。

###### 为啥整数的除法是精确的。

在Python中，有两种除法

1. 一种除法是`/`（计算结果是浮点数）

   ```python
   print(10/3)
   3.3333333333333335//输出
   ```

   `/`除法计算结果是浮点数，即使是两个整数恰好整除，结果也是浮点数

   ```python
   print(9/3)
   3.0
   ```

2. 另一种是`//`,称为地板除，两个整数的除法仍是整数，整数的地板除`//`永远是整数，即使除不尽。

```python
print(10//3)
3
```

余数运算，可以得到两个整数相除的余数：

```python
print(10%3)
1//输出
```

`小结`

Python支持多种数据类型，在计算机内部，可以把任何数据都看成一个“对象”，而变量就是在程序中用来指向这些数据对象的，对变量赋值就是把数据和变量给关联起来。

对变量赋值`x = y`是把变量`x`指向真正的对象，该对象是变量`y`所指向的。随后对变量`y`的赋值*不影响*变量`x`的指向。

注意：Python的整数没有大小限制，而某些语言的整数根据其存储长度是有大小限制的，例如Java对32位整数的范围限制在`-2147483648`-`2147483647`。

Python的浮点数也没有大小限制，但是超出一定范围就直接表示为`inf`（无限大）。

#### 3.字符串与编码

###### 字符编码

用记事本编辑的时候，从文件读取的UTF-8字符被转换为Unicode字符到内存里，编辑完成后，保存的时候再把Unicode转换为UTF-8保存到文件：

![rw-file-utf-8](Python%E7%9A%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0.assets/0.png)



浏览网页的时候，服务器会把动态生成的Unicode内容转换为UTF-8再传输到浏览器：

![web-utf-8](Python%E7%9A%84%E5%9F%BA%E7%A1%80%E5%AD%A6%E4%B9%A0.assets/0-16417080901602.png)

很多网页的源码上会有类似`<meta charset="UTF-8" />`的信息，表示该网页正是用的UTF-8编码。

###### Python的字符串

对于单个字符的编码，Python用`ord()`函数获取字符的整数表示，`chr()`函数把编码转换为对应的字符。

```python
print(ord('A'))
65//输出
print(ord('刘'))
21016//输出
print(chr(70))
F//输出
print(chr(25441))
捡//输出
```

由于Python的字符串类型是`str`，在内存中以Unicode表示，一个字符对应若干个字节。如果要在网络上传输，或者保存到磁盘上，就需要把`str`变为以字节为单位的`bytes`。

Python对`bytes`类型的数据用带`b`前缀的单引号或双引号表示：

```python
x=b'ABC'
```

要注意区分`'ABC'`和`b'ABC'`，前者是`str`，后者虽然内容显示得和前者一样，但`bytes`的每个字符都只占用一个字节。

###### [有时间，就再回头看看吧](https://www.liaoxuefeng.com/wiki/1016959663602400/1017075323632896)

以Unicode表示的`str`通过`encode()`方法可以编码为指定的`bytes`

```python
print( 'ABC'.encode('ascii'))
b'ABC'//输出
print('中文'.encode('utf-8'))
b'\xe4\xb8\xad\xe6\x96\x87'//输出

```

纯英文的`str`可以用`ASCII`编码为`bytes`，内容是一样的，含有中文的`str`可以用`UTF-8`编码为`bytes`。含有中文的`str`无法用`ASCII`编码，因为中文编码的范围超过了`ASCII`编码的范围，Python会报错。

在`bytes`中，无法显示为ASCII字符的字节，用`\x##`显示。

反过来，如果我们从网络或磁盘上读取了字节流，那么读到的数据就是`bytes`。要把`bytes`变为`str`，就需要用`decode()`方法：

```python
print(  b'ABC'.decode('ascii'))
 ABC
 print(b'\xe4\xb8\xad\xe6\x96\x87'.decode('utf-8'))
 中文
```

如果`bytes`中包含无法解码的字节，`decode()`方法会报错：

```
>>> b'\xe4\xb8\xad\xff'.decode('utf-8')
Traceback (most recent call last):
  ...
UnicodeDecodeError: 'utf-8' codec can't decode byte 0xff in position 3: invalid start byte
```

如果`bytes`中只有一小部分无效的字节，可以传入`errors='ignore'`忽略错误的字节：

```
>>> b'\xe4\xb8\xad\xff'.decode('utf-8', errors='ignore')
'中'
```

计算`str`包含多少个字符，可以用`len()`函数：

```python
print(len('ABC'))
3
print(len('中文'))
2
```

`len()`函数计算的是`str`的字符数，如果换成`bytes`，`len()`函数就计算字节数：

```python
print(len(b'ABC'))
3
print(len(b'\xe4\xb8\xad\xe6\x96\x87'))
6
```

1个中文字符经过UTF-8编码后通常会占用3个字节，而1个英文字符只占用1个字节。

在操作字符串时，我们经常遇到`str`和`bytes`的互相转换。为了避免乱码问题，应当始终坚持使用UTF-8编码对`str`和`bytes`进行转换。

由于Python源代码也是一个文本文件，所以，当源代码中包含中文的时候，在保存源代码时，就需要务必指定保存为UTF-8编码。当Python解释器读取源代码时，为了让它按UTF-8编码读取，通常在文件开头写上这两行：

```
#!/usr/bin/env python3    //告诉Linux/OS X系统，这是一个Python可执行程序，Windows系统会忽略这个注释
# -*- coding: utf-8 -*-    //告诉Python解释器，按照UTF-8编码读取源代码，否则，你在源代码中写的中文输出可能会有乱码。
```

###### 格式化

1. ###### Python中，采用的格式化方式和C语言是一致的，用`%`实现

```python
print('Hello, %s' % 'world')
Hello, world
print('Hi, %s, you have $%d.' % ('Michael', 1000000)) 
Hi, Michael, you have $1000000.
```

`%`运算符就是用来格式化字符串的。在字符串内部，`%s`表示用字符串替换，`%d`表示用整数替换，有几个`%?`占位符，后面就跟几个变量或者值，顺序要对应好。如果只有一个`%?`，括号可以省略。

常见的占位符有：

| 占位符 | 替换内容     |
| :----- | :----------- |
| %d     | 整数         |
| %f     | 浮点数       |
| %s     | 字符串       |
| %x     | 十六进制整数 |

其中，格式化整数和浮点数还可以指定是否补0和整数与小数的位数：

```python
print('%2d-%02d' % (3, 1))
 3-01//输出
print('%.2f' % 3.1415926)
3.14//输出
```

###### 如果不太确定应该用什么，`%s`永远起作用，它会把任何数据类型转换为字符串：

```python
print('Age: %s. Gender: %s' % (25, True)) 
'Age: 25. Gender: True'//输出
```

字符串里面的`%`是一个普通字符怎么办？这个时候就需要转义，用`%%`来表示一个`%`：

```python
print('growth rate: %d %%' % 9)
'growth rate: 9 %'
```

2.  ###### format()——麻烦


另一种格式化字符串的方法是使用字符串的`format()`方法，它会用传入的参数依次替换字符串内的占位符`{0}`、`{1}`……，不过这种方式写起来比%要麻烦得多：

```python
print('Hello, {0}, 成绩提升了 {1:.1f}%'.format('小明', 17.125)) 
'Hello, 小明, 成绩提升了 17.1%'
```

3. ###### f-string

   最后一种格式化字符串的方法是使用以`f`开头的字符串，称之为`f-string`，它和普通字符串不同之处在于，字符串如果包含`{xxx}`，就会以对应的变量替换：

   ```python
   r = 2.5
   s = 3.14 * r ** 2
   print(f'The area of a circle with radius {r} is {s:.2f}')
   The area of a circle with radius 2.5 is 19.62
   ```

   `{r}`被变量`r`的值替换，`{s:.2f}`被变量`s`的值替换，并且`:`后面的`.2f`指定了格式化参数（即保留两位小数），因此，`{s:.2f}`的替换结果是`19.62`。

   `小结`

   Python 3的字符串使用Unicode，直接支持多语言。

   当`str`和`bytes`互相转换时，需要指定编码。最常用的编码是`UTF-8`。Python当然也支持其他编码方式，比如把Unicode编码成`GB2312`：

   ```
   >>> '中文'.encode('gb2312')
   b'\xd6\xd0\xce\xc4'
   ```

   但这种方式纯属自找麻烦，如果没有特殊业务要求，牢记仅使用`UTF-8`编码就行。

   格式化字符串的时候，可以用Python的交互式环境测试，方便快捷。

   #### 4.使用list和tuple

   ###### list

   python内置的一种数据类型是列表：list。list是一种有序的集合，可以随时添加和删除其中的元素。

   比如，列出班里所有同学的名字，就可以用一个list表示：

   ```python
   classmates = ['Michael', 'Bob', 'Tracy']
   print(classmates )
   ['Michael', 'Bob', 'Tracy']//输出
   ```

   变量`classmates`就是一个list。用`len()`函数可以获得list元素的个数：

   ```python
   classmates = ['Michael', 'Bob', 'Tracy']
   print(len(classmates))
   3//输出
   ```

   用索引来访问list中每一个位置的元素，记得索引是从`0`开始的：

   

   









